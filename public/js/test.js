"use strict";function wrt(t){console.log(t)}var wssUrl="wss://neto-api.herokuapp.com/yellowgallery/68dad5c0-ff2e-11e7-89e2-afe5096586a4",canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.height=canvas.width=500,ctx.beginPath(),ctx.arc(100,75,50,0,2*Math.PI),ctx.stroke();var socket=new WebSocket(wssUrl);socket.onopen=function(){wrt("Соединение установлено.")},socket.onmessage=function(t){wrt("Получены данные");var e=JSON.parse(t.data);if(wrt(e),"mask"===e.event){wrt("Картинка обновлена");var c=e.url.substr(0,e.url.indexOf("nocache")-1);document.querySelector(".test-image").src=c}},socket.onclose=function(t){t.wasClean?wrt("Соединение закрыто чисто"):wrt("Обрыв соединения"),wrt("Код: "+t.code+" причина: "+t.reason)},document.querySelector(".test-button").addEventListener("click",function(){wrt("socket:status: "+socket.readyState),canvas.toBlob(function(t){wrt("Отправляем"),wrt(t),socket.send(t)})});